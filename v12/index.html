<html><head>
<style>
tr:nth-child(even) {
  background-color: #ddd;
}
tr:nth-child(odd) {
  background-color: #fff9;
}
img{
    display: block;
    margin-left: auto;
    margin-right: auto;
    width: 50%;
}
.settings{
font-size:20px;
border:0px;
width:100px;
height:50px;
border-radius: 15px;
background-color:#fdf;
}
</style>
<script src="/eta/script/cookie.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="icon" type="image/x-icon" href="/eta/icon/icon.png">
</head><body style="background-color:d2dcff">

<h1 style="text-align: center; font-size:7vw">歡迎使用 巴士到站預報</h1>

<a href="/eta/v12/route.html">
<div style="
    margin: auto;
    width: 40%;
    border: 2px solid black;
    padding: 10px; 
    background-color:lightgray">
 
<img src="/eta/icon/eta_stop.png">
<p style="text-align: center; font-size:4vw;color:black;">查詢巴士路綫</p>
           
</div>
</a>

<br>
<a href="/eta/v12/settings.html"><button class="settings" align="right">設置</button></a>
<br>
<br>
<div style="padding:0 0 0 0; background-color:#fff9;border-radius:6px;width:100%">
<label style="font-size:20px">巴士站 書簽</label>
<table id="B" style="width:100%"><tbody style="width:100%">
</tbody></table>
</div>
</body>

<script>
var ck=[];
function parseCookie(){
ck = document.cookie.split("; ");
ck = ck.filter(e=>e.split("=")[0]=="bkmark");
if(ck.length>0){ck = JSON.parse(ck[0].split("=")[1]);}else{ck = [];}
}

function update_bkmark(){
parseCookie();
while(document.getElementById("B").childNodes.length>0){document.getElementById("B").childNodes[0].remove()};
ck.forEach((data,i)=>{
    var Row = document.getElementById("B").insertRow(i);
    Row.insertCell(0).innerHTML = 
    `<button style="text-align: left; width:100%; background:#0000; border:0px" onclick="bkmrk(`+i+`);">
    <pre style="display: inline;font-size:4vw;">書簽 `+i+`</pre>`+
    `<label style="display: inline;font-size:3vw;"> `+data.bk.map(g=>g[2]).join(" ")+` </label>`
    +`</button>`;
    Row.insertCell(0).innerHTML = 
    `<button style="width:75px; font-size:4vw;" onclick="rmbk(`+i+`);">X</button>`;
    });
}
update_bkmark(); 
   
function bkmrk(i){window.location.href="/eta/v12/bystop.html?!"+i+","+Get_Cookie("settings",{"preset":1}).preset}
function rmbk(i){
parseCookie();
ck[i]={"bk":[],"routes":[]};
document.cookie = `bkmark=`+JSON.stringify(ck)+`; path=/eta/v12/ ; expires=`+new Date(2047,2,28).toUTCString();
update_bkmark()
}
</script>

 

</html>
